[tools]
node = "lts"
pnpm = "latest"
python = "3.12"

[env]
_.python.venv = { path = ".venv", create = true }

[tasks.setup]
description = "Install JS and Python dependencies"
run = ["pnpm install", "pip install pytest pytest-asyncio"]

[tasks.build]
description = "Build frontend"
run = "pnpm build"
depends = ["setup"]

[tasks.test]
description = "Run Python tests"
run = "python -m pytest tests/ -q"

[tasks.dev]
description = "Setup, build, and restart plugin loader"
run = "sudo systemctl restart plugin_loader"
depends = ["build"]
